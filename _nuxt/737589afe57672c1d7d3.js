(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{228:function(t,e,n){t.exports=n.p+"img/0a40985.png"},290:function(t,e,n){var content=n(466);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(29).default)("6c1fc0d4",content,!0,{sourceMap:!1})},465:function(t,e,n){"use strict";var o=n(290);n.n(o).a},466:function(t,e,n){(e=n(28)(!1)).push([t.i,".main-container[data-v-1c34128c]{background:#000;position:fixed;height:100vh;top:0;bottom:0;right:0;left:0;overflow:hidden;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:start;justify-content:flex-start;-webkit-box-align:center;align-items:center}.guidian-container-mobile[data-v-1c34128c]{margin-top:2vh;height:50%;top:5%;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;padding:1rem}.guidian[data-v-1c34128c]{height:100%;width:auto;-webkit-animation-name:float-data-v-1c34128c;animation-name:float-data-v-1c34128c;-webkit-animation-duration:2s;animation-duration:2s;-webkit-animation-timing-function:ease-in-out;animation-timing-function:ease-in-out;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes float-data-v-1c34128c{0%{-webkit-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-10px);transform:translatey(-10px)}to{-webkit-transform:translatey(0);transform:translatey(0)}}@keyframes float-data-v-1c34128c{0%{-webkit-transform:translatey(0);transform:translatey(0)}50%{-webkit-transform:translatey(-10px);transform:translatey(-10px)}to{-webkit-transform:translatey(0);transform:translatey(0)}}.popup-enter-active[data-v-1c34128c],.popup-leave-active[data-v-1c34128c]{opacity:1;-webkit-transition:all 1s cubic-bezier(1,.5,.8,1);transition:all 1s cubic-bezier(1,.5,.8,1)}.popup-enter[data-v-1c34128c],.popup-leave-to[data-v-1c34128c]{-webkit-transform:translateY(50vh);transform:translateY(50vh);opacity:0}.text-box[data-v-1c34128c]{background:#ebebeb;position:fixed;width:100%;right:0;left:0;bottom:0;padding:1.5rem;font-size:1.8rem;border-top-left-radius:15px;border-top-right-radius:15px}.text-box-ios[data-v-1c34128c]{height:40%}p[data-v-1c34128c]{font-size:1.7rem;font-weight:500;max-height:50%;overflow:auto}.custom-control-label[data-v-1c34128c]{font-weight:700}.custom-input[data-v-1c34128c]{height:3rem;font-size:1.5rem}",""]),t.exports=e},522:function(t,e,n){"use strict";n.r(e);n(30);var o,r=n(9),c=(n(12),n(40),{middleware:"noAuth",data:function(){return{shouldShowContainer:!0,isGuidianShown:!1,isSupport:!1,isWriteSuccessful:!1,form:{email:""}}},asyncData:function(t){t.store.dispatch("quest/getUser")},mounted:function(){var t=this;if(this.$fireAuth.isSignInWithEmailLink(window.location.href)){this.shouldShowContainer=!1;var e=window.localStorage.getItem("emailForSignIn");e||(e=window.prompt("Please provide your email for confirmation"));var n=this.$fireAuthObj.EmailAuthProvider.credentialWithLink(e,window.location.href);this.$fireAuth.currentUser?this.$fireAuth.currentUser.linkWithCredential(n).then((function(e){var n=e.user;t.$store.commit("quest/SET_USER_EMAIL",n.email),t.$store.commit("SET_AUTH_USER",{authUser:{uid:n.uid,email:n.email}}),setTimeout((function(){return window.location.reload(!0)}))}),(function(n){console.log("Error upgrading anonymous account",n),t.$fireAuth.signInWithEmailLink(e,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn"),t.$router.replace("/quest")})).catch((function(t){console.log(t)}))})):(console.log("No users signed in!"),this.$fireAuth.signInWithEmailLink(e,window.location.href).then((function(e){window.localStorage.removeItem("emailForSignIn"),t.$router.replace("/quest")})).catch((function(t){console.log(t)})))}this.$device.isMobileOrTablet||this.$router.replace("/quest/access"),setTimeout((function(){t.isGuidianShown=!0}),200)},methods:{writeEmail:(o=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,o,r=this,c=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=c.length>0&&void 0!==c[0]&&c[0],this.$store.dispatch("quest/updateUserEmail",{newEmail:this.form.email,newIsSupport:this.isSupport}),n=this.form.email,o={url:"".concat("https://v2.facingdragons.com","/quest/access?support=").concat(e),handleCodeInApp:!0},this.isWriting=!0,this.$fireAuth.sendSignInLinkToEmail(n,o).then((function(){window.localStorage.setItem("emailForSignIn",n),r.isWriteSuccessful=!0,r.isWriting=!1})).catch((function(t){r.isWriteSuccessful=!1,r.isWriting=!1}));case 6:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},computed:{emailState:function(){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.form.email)},invalidFeedback:function(){return""===this.form.email?"":/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.form.email)?"":"Please Enter a Valid Email Address"}}}),l=(n(465),n(24)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.shouldShowContainer?o("div",{staticClass:"main-container"},[o("transition",{attrs:{name:"popup"}},[t.isGuidianShown?o("div",{staticClass:"guidian-container-mobile"},[o("img",{staticClass:"guidian",attrs:{src:n(228),alt:"guidian"}})]):t._e()]),t._v(" "),o("transition",{attrs:{name:"popup"}},[t.isGuidianShown?o("div",{staticClass:"text-box",class:{"text-box-ios":t.$device.isIos}},[o("p",[t._v("\n            "+t._s(t.isWriteSuccessful?"Please check your email!":"Would you like to share your email with me so that I can show you how you did on the quest?")+"\n        ")]),t._v(" "),t.isWriteSuccessful?t._e():o("b-form-checkbox",{staticClass:"mt-5 mb-2 control-label",attrs:{id:"is-support",name:"is-support",size:"lg"},model:{value:t.isSupport,callback:function(e){t.isSupport=e},expression:"isSupport"}},[t._v("\n            I AM A SUPPORT WORKER\n        ")]),t._v(" "),t.isWriteSuccessful?t._e():o("b-form",[o("b-form-group",{attrs:{id:"input-email-group",state:t.emailState,"invalid-feedback":t.invalidFeedback}},[o("b-input-group",[o("b-form-input",{staticClass:"custom-input",attrs:{id:"input-email",type:"email",required:"",placeholder:"Enter Your Email"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}}),t._v(" "),o("b-input-group-append",[o("b-button",{staticClass:"submit-button",attrs:{variant:"success",disabled:""===t.form.email||!t.emailState||t.isWriting},on:{click:function(){return t.writeEmail(!0)}}},[t._v("\n                        Submit\n                    ")])],1)],1)],1)],1)],1):t._e()])],1):t._e()}),[],!1,null,"1c34128c",null);e.default=component.exports}}]);